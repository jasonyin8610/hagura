---
title: "寻找（编程的）未来"
date: '2017-01-23 16:45:13'
layout: post
---
本文由殷建松，根据EVE老总Chris Granger在2015年12月11日在美国伯克利数据科学院的演讲视频 https://www.youtube.com/watch?v=VZQoAKJPbh8 进行翻译而成。

在过去的6年，我一直在探索一个问题：未来十年的编程将会变成怎样。我最开始思考时，在微软的Visual Studio。当时我是一个程序经理，我在问一个有趣的问题：为了让编程变得更加有效的话，Visual Studio将会变成怎样。

为了回答这个问题，我说服了我的上级，让我做一个研究。这是曾经做过的唯一一个端到端的对Visual Studio的研究。我坐在一个单向玻璃房间里，用一个半月的时间，观察人们是如何通过编程来解决问题的。作为结果，我获得了很多对于『编程到底是什么、我们到底是如何做编程的』的洞察。

作为一个行业，软件开发行业，并不擅长自我观察。我做了这个对未来编程工具的研究。然后我做了一系列的有趣原型。从那里开始，我学习到了『虽然Visual Studio是一个巨型的软件，但是人们还是需要在自己的大脑中模拟运行一个计算机』。我希望能够让软件开发的反馈过程变短，即做了什么改变后马上显示出效果。

由此我开发了Light Table。它最大的特色是能够即时显示出来变化的涟漪。当我在输入的时候，程序能显示出来结果，这样就好像是把一个黑盒子打开，让你能够看到里面是什么。我们的目标，不像微软是让编程变得更加高效，而是更重要的：让编程变得更加可接近。

编程的难点在于它是看不到的。你看不到变化的效果，你看不到数据的流动，不得不在自己的头脑中模拟计算机运行。对于一个职业编程人员来说，用Light Table就可以少用一半的开发时间。作为一个结果，在Visual Studio中人们会写大段的代码，而不去点击运行按钮，但是在Light Table中人们写很小段的代码、一直在进行着尝试。

在建立各种代码的过程中，人们就能够相对精准地知道每一块代码的效果是什么。这是很棒的。但是这还不足以让人们，从其他开发工具切换过来，在让编程变得可接近方面，没有什么建树。我曾经写了一篇文章『让编程变得更好』，但是为了变得更好，我们首先得理解编程到底是什么。

看来我在尝试回答一个我不理解的问题。现在编程到底有什么缺陷？我们做了一系列的研究，结论是：编程不可视、不直接、因此很复杂。通常当我在代码中做了一些改变，除非我手动地运行这些代码，我并不知道会发生什么。我不知道每一个改变的效果是什么，更不知道一系列改变的叠加效果是什么。这就是我们用Light Table尝试去改进的：让编程变得可视。

但是还有另外一个『不直接』的问题。如果我描述一个无人机在空中飞翔，我想让它做一些动作，我首先得翻译成一种编程语言、才能把指令输入给计算机。我必须像计算机一样的思考，才能让计算机得到我想要的结果，这是非常难的映射。大部分在计算机中的错误，是来自于简单的映射错误。这种不直接性，导致很大的摩擦。

在Visual Studio中，我们看到很多这样的例子。某人有一个正确的解决方案，但是在路上时，因为映射出了点小问题，就运行不起来。逻辑并没有错误，但是不管是用什么编程语言，往往映射逻辑的机械过程中，出现了一些问题，就导致运行不了。这不是一件容易的事。

最后一个问题是：由上面两个缺陷带来的复杂性。编程人员在解决问题的过程中，大部分工作量与问题解决没有关系。比如要全新设置一台编程人员用的个人电脑，在微软我看到需要几天的时间，才能设置好。这还没开始解决问题呢，而是围绕解决问题的额外工作量。我们花大量的时间，仅仅在解决外围的那些问题。

让我们来进行一个小演示，来说明为什么编程那么的难。我们尝试要建立一个最简单的软件，在网页上放一个按钮，鼠标点击一下，就显示一个点击数的总计。假设你懂HTML，那么你需要用下面的代码，来把网页和按钮显示出来：

<html>

  <head></head>

 <body>

  <button id="mybutton"/>

 </body>

</html>

然后你需要用六行的Javascript代码来实现功能，点击一下即显示点击的总计数：

var count = 0;

var button = document.getElementByID

button.onclick = function (event) {

  count = count + 1;

  button.textContent = count

}

现在让我们来了解到底在这六行的Javascript中有什么。首先你得理解『身份Identity』的概念，才能明白getElementByID。这看上去很简单，但却是编程中理解起来困难的概念之一。我得告诉程序说，看这个网页中的这个按钮，我在说它呢、我想对它进行操作。然后你得了解『作用域Scope』的概念，才能明白(event){}。

你还得知道什么叫『变量Mutable assignment』，变量导致过很多的软件错误。你还得知道『闭关Closure』，这对于很多编程人员来说都不理解。还有一些概念，比如异步Asynchrony、对象Objects、属性Property、文档对象DOM等等。虽然它只有短短的六行，简直『太长』而无法读懂了。

你得花几年的时间才能理解这些概念。当然你可以直接去StackOverFlow等编程网站，把这一段六行代码，复制下来，放到HTML中，然后很高兴看到它可以运行了。但是你不能改变其中的任何一个东西，因为你没有真正理解。所以说编程是很难的，但是真有必要让编程这么难吗？

虽然我们Light Table可以让机器的反馈变得很及时，你不必在大脑中模拟运行计算机，但是上述问题并没有改变，你还是得理解这么多复杂而抽象的概念。不管你的工具做的多么好，编程还是很难的。这些工具的目标，都是让我们能去开发应用。但是当我深入思考的时候，我发现：我们真正想的是，让编程变得可接近，而不仅仅是为了开发应用。

我们不是为了让你更加方便地建立动态应用，而是要做更加基本的一件事：思考！在1970年代，当现在用的这些工具出现的时候，我们不是为了做软件应用开发，而是想要有一个思考的工具。毕竟计算机是人类曾发明的最好的思考工具。当时如果我能在纸上打孔，我就能让计算机来帮我思考了。

让计算机帮我们思考这个想法，就引发了EVE这个项目。当我在研究Visual Studio如何让编程变得更好时，我发现工具不是问题，而编程模型是问题。EVE忽略现存所有『好』东西，忽略比如函数型编程等所谓的趋势，完全从零开始，来考虑编程应该是怎样的。

我在Strangloop软件先锋大会上，把EVE的第一个原型做了演示。当时我们想用函数型编程、可变变量等，通过从MongoDB中取用户使用数据，然后拖拉拽的方式就可以做一些计算，并且可视化显示。我们还可以用这个方式来建立动态网站应用等。

但是后来，我参加了一个非程序员的科技大会，希望大家能喜欢这个。人们还真是喜欢它，但是让我们惊恐的是，人们用它做不了什么事，虽然他们从内心都渴望用它做事。这段经历，让我发现，对非程序员来说最难的事，是理解作用域Scope这个概念。

有人说：上面这个数字，我想在下面使用。我不得不告诉他，你还真不能做这事，因为这些是在函数的作用域之外的，你得通过一系列的传递，才能使用它。有人接着问：为什么我能在这里看到它，而不能在下面来使用它？或者下面有某个数字，我想到上面来使用。我只好说，你还是不能做此事，因为受限于作用域Scope。

对程序员来说，作用域Scope是一个重要的概念。我们尝试了各种方式，想让作用域这件事，看上去更加自然一些，但始终没有作用，因此这是一个很基础的问题。但是我自己也慢慢不相信这是必须的了。软件开发行业，好像都认为函数型编程和可变变量是未来，但是对非程序员来说，作用域Scope是很大障碍。

没有作用域Scope，就没有函数型编程，并且在数据树状结构中，有可能出现数据不同步等问题。对职业程序员来说，编程就是一些步骤，通过函数对数据进行处理，没有函数怎么行。我们开始寻找是否有其他产品已经解决了这个问题。发现至少有一个巨大成功的产品，叫Excel。它确实没有函数层次和作用域等概念。

每天有8亿人在使用Excel，它确实是一个优秀的。思考工具。有一个财富500大公司，他们有一个十多年来，由非程序员们建立起来的大到几个G的Excel表格，把整个公司的业务建模了。但是Excel不是为这样的目的设计的。他们开玩笑说：当要在这个巨型Excel中，改变一个单元格的值，就不得不去吃中饭，因为Excel的重新计算需要花费1个半小时。

Excel是受制于两维的数据表格，你有时比较难把你的问题建模成为两维的数据表格。因此我们继续寻找。这时我们又找到了另外一个取得巨大成功的产品，那就是关系型数据库。它与Excel有相似的属性：如果你看到一个数据、你可以在任何地方使用它。在关系型数据库中，也没有与生俱来的顺序性，从程序到执行到数据，你都可以按照自己想要的顺序来安排。并且它也没有很多层次嵌套的函数，和作用域Scope这种疯狂的事。

虽然关系型数据库没有Excel那样可接近，但是它解决了另一方面的问题，很灵活。最终这个世界是在关系型数据库上运行的。我们用它建设了游戏、网站等等，建设了你能想象到的任何东西。所以我们继续寻找关系型数据库的最新发展，发现了在这里（伯克利数据科学院）的BLOOM实验室团队，用Datalog建立了分布式的数据查询系统。

这看上去有惊喜。我们能否用这个技术来建立网站呢？于是我们建立了这个待办事项的例子，并且用这个例子融到了资。这有点像是在做填空题：当你看到某某的时候，就做某某。在建立该例子的过程中，我们意识到很多原来我们认为对编程来说是必须的东西，实际上不是必须的。并且我们发现这种疯狂的模式下，用600行代码就能开发一个集成开发工具，代码量急剧下降了。

这种填空题的做法，有点像是用英语在编程。有人曾经说英语化编程是未来，但我们不是这样认为。因为英语化编程，要求你在理解了前面几行的语义的基础上，才能理解当前这一行。这意味着需要理解整个内容，才能建立上下文，这对普通人来说有很大挑战。

接下来我们尝试还是用Excel来做试验。用多个表格来进行连接和记录等，给我们自己的手机发送一个短消息等。这个看起来有效果，可以做一些简单的事，不过也有问题：当你有了这些表格之后，你失去了这些信息从哪里来的上下文信息。这些表格中需要有键值，并且通过这些键值来进行连接等等，这仍然是比较难的。

我们需要的是一个能为通用目的做开发，同时又非常简单的软件开发工具。于是我们又回到Bloom实验室的基础，建立了一个时钟的演示。就像SQL一样，我们在做查询，并且这个查询是动态实时更新的，在网页上显示了一个时钟动画。我们不用描述事情是如何变化的。本质上，我们是在问一个问题，然后格式化显示该问题的答案。

我们用这种完全不同的看待世界的方式，建立了各种例子，比如待办事项清单、时钟动画，甚至还有一个图灵机器。虽然还不知道如何向人们展示这个技术，但看起来这是一个很健康的解决方案。我们还得解决关于性能的问题，好在这种对数据树的查询，缺省就是很快速的。虽然还是很多的事要走，基础是扎实的。

这次我们用一个拖拉拽的方式，再次来做上面那个最简单的编程例子：点击按钮，显示点击数。上部是我们的软件例子，下部是一个Excel表格，来记录点击数。你可以把下面表格中的点击总计数的字段，拖拉到按钮上后投放，然后这个功能就实现了！很短时间就完成了一个重要的功能开发。

接着我们用这套来建立一个克隆Foursquare网站，虽然也能大致建立起来，但是里面的表格的查询有点奇怪，所以干的很难受。这很有趣，我们不需要手工写代码，就可以建立一个真实的网站。这之后，我们想用主体关系图的样子，在一个白板上画出来查询之间的关系形状。这是我们第一次发现，在不提供解释情况下，人们也能理解相对复杂的查询了。

但是这种聚焦在查询上的做法，让我们对数据的关心就不够了。就好像很多精力放在了问题上，而不是在答案上。然后我们又做了一个类似语音查询的东西，在线性化笔记本上显示出来各种查询的结果。但是线性化笔记本会暗示，先有这个、再有那个，但实际这不是真的。你有可能在底部做一件事，完全改变了起初的那件事。

虽然我们热爱这个方案的基础部分，但是尝试了30种不同的用户界面方面，到目前为止还不知道什么样的界面是好的。很显然我们做错了什么，那么起初我们有什么样的假设呢？这个假设是，我们在建立一个开发软件的环境。但是想法不是要做开发软件的环境，而是想要有一个思考工具。思考工具不一定是开发软件的环境！

今天我们这里演示的东西，看起来一点都不像是一个开发软件的环境。这里有一个搜索框，我输入自己的名字。然后就显示出来一个关于我的卡片，看起来像维基百科，真正的名字是语义维基。很多这个卡片上的数据，并不一定是像Excel那种两维的数据表格。然后我们对这个卡片就可以进行提问了。

这是一个非常流畅的对信息工作的方式。相关的信息通过超级链接联系起来了，我们可以在这个卡片维基中到处点击，来回答可能有的问题。比如计算下某个『部门』的『工资』总计，本来『部门』和『工资』之间是没有直接的连接的，中间要通过『员工』联系起来，但是系统可以自动处理这样的问题，还可以把计算过程可视化地显示出来。我们由此知道，所有的信息是如何来的。

但这还不是编程。作为编程，我们得对查询出来的结果进行格式化，这才叫自动化计算。现在我们增加卡片的一个新属性，在『部门』卡片上，我们增加一行叫『这个部门的工资总计为X』。然后再增加一行，如果超过20，就显示『这个部门花费太多了』。通过问类似这种计算性问题，我们可以获得相应的答案，并且可以把结果发邮件等等。这样我没有开发应用软件，也得到了新的信息。

我们甚至可以让这个系统像Siri一样，来回答我们需要问的问题。如果我们后退一步，停止考虑这是在编程。我们不再编程，而仅仅是在问问题、就能得到答案、进行各种格式处理。这就是EVE作为『思考工具』的力量所在。现在还有很多的事情要做。我希望不管未来的编程看起来是怎样，它肯定会和今天的编程有很大的不同！

今天的专业人士，在尝试医治癌症、探索宇宙。将来他们不用担心Unicode、不用担心内存管理、嵌套顺序等等这些可笑的东西，这些东西与他们想去做的美妙的事，一点关系都没有！这里的终极目标是让计算机，变成所有普通人的一个思考工具。这是我们必须要去到的地方。