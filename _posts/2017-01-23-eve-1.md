---
title: "关于EVE理念的争鸣"
date: '2017-01-23 16:49:39'
layout: post
---
# 挑战篇

http://robmoff.at/2016/01/13/all-about-eve/](http://robmoff.at/2016/01/13/all-about-eve

EVE是一种新的编程语言。 或者说是一个开发环境。 或许更准确地说，它是思考的工具。 如果你有一个小时的空闲时间，推荐你观看下克里斯·格兰杰的这个Youtube视频（即《寻找（编程的）未来》https://shimo.im/doc/kJPTC3W2eKY9VPlS）

这个视频一开始在讨论“在10年后编程将会变成怎样呢？”。克里斯的职业生涯，开始于微软的开发工具Visual Studio的研发。但随后，面对这款产品的复杂性，克里斯想建立一个剥去很多复杂性的IDE（集成开发工具），于是做了一个编辑Clojure/ ClojureScript代码的Light Table产品。 Light Table的目的是，减少或消除编写代码和看到结果之间的时间周期。

但是克里斯从Light Table中学习到，仅仅把IDE做好是不够的。 编程本身饱受困扰的是，它不可视、不直接，因此陷入到意外复杂性和无法观察性的重重困扰。

EVE来自一系列旨在如何能让计算变得更好的试验。 他们广泛审查现有的文献和最先进的资料，决定如何真正解决计算变得更好的问题。最接近的解决方案，是像Excel和SQL（即关系型数据库）的工具。

一路上，他们尝试过GUI（图形界面）编辑器、可视化查询、更传统的基于文本的语言。 克里斯最后演示了EVE的初步版本，一个卡片Wiki，与查询语言相结合的一个数据库。这似乎很像Lotus Notes。事实上，Wiki和Lotus Notes有许多共同的特色：非结构化数据、改变数值的函数、数据视图等。

所以，EVE似乎是一个有光明未来的一个非常酷的产品。

但。我不认为这是编程会在10年后的样子。

如果Lotus Notes那么酷的话，为什么我们今天不使用它了呢？ 另外，如果Excel编程是如此棒，我为什么不开发银行软件时不使用它？

关键是，我认为要考虑三个权衡。我想谈谈：

## 1.开放性和意外复杂性

当你有一个封闭的系统（如EVE、或WordPress、或Lotus Notes、或MySQL、或Excel），你真的可以避免意外复杂性。 意外复杂性是：在系统A中的，我有一个名为“姓名”的一栏，但在系统B中，我有“名”和“姓”的两栏。 或者说，在这里是美国格式的日期，但在导入文件时是欧洲格式的日期。 或者说，我有一个事件驱动系统，每次有新的订单时触发，但我的财务系统要求每天触发一次......类似这种头疼的事。

当你用Java或C ++或任何一种通用的语言进行编程时，可以处理意外复杂性，因为这些语言就像胶水 ：他们可以粘连起来不同的库、或数据库、或应用程序、或输入、或队列、或任何东西。 他们是“开放”：他们接受整个世界，没有任何特定的规则，并且他们需要适应这个世界。

在另一方面，“封闭”系统迫使世界按照自己的规则运行。所以，当我要写Eclipse、Excel、Minecraft、WordPress的任何一个插件，我必须要遵守其规则。 这可以做到。 但是，有很多是我们每天使用的系统，偏不按规则玩。 当然，也不会有系统遵守EVE规则，因为EVE是刚刚出现的。

但是，这个问题可否通过建立“EVE插件”解决？ 由此，我们可以让它对接现有的关系型数据库、或文件系统等等。 嗯，yes和no。 之前Lotus Notes已经有这种挑战。 人们希望它与SQL数据库交谈。 工作完成时，数据可以进行同步，也许这解决了很多人的问题。 但不可避免的是，有了这个，你从这些系统中，输入了意外复杂性：表结构、日期格式、编辑周期、交易等。

所以，感觉对我来说，这是一个根本性的问题： 我们是否可能建立开放式系统，而不导入意外复杂性，因为，如果我们不能的话，很多未来的编程就不能用“EVE方式"实现呢？ 。

但是，也许这也是可接受的。

## 2.组织性和可接近性

在克里斯的视频，他谈到普通用户被作用域的概念所困扰。他们想在函数中使用的某个数据，但因为那个数据不在本作用域之内而受限。 他指出，无论是Excel或关系型数据库都没有这个问题，所以，维基式的EVE把作用域概念丟弃了。

但是，作用域是被故意添加到编程语言，来减少错误一个有用的东西。 全局状态确实是软件错误的根源：当你扩展你的软件努力，很快会遇到全局状态混乱的风险。

Java中设计了很多的功能，都为了提高软件的组织性 ，减少重复和保证一致性。是的，没有这些功能，你可以建立一个更加可接近、容易学习、更直接的语言，但随着软件要解决的问题变大，更大的挑战是组织性，而不是可接近。 所以，我们得做出权衡。

这是Lotus Notes的主要缺点之一：软件版本化管理很难。升级数据库很困难。甚至知道什么代码在应用程序里很难。测试都是手动的。重复利用很少。修改控制（git）是不可能的。 当你在一个地方改变东西时，你不知道这是否在别的地方引入了一个问题。

现在比这个更难了。现在，我觉得Java等让我们失望了。版本化发布，并测试该软件是否正确，并确保当你改变系统的一部分时，你不会给系统的其它部分带来问题，还真是很难做到。

我的客户有相互关联的计算机系统组成的庞大网络，在不同的发布周期、在不同的硬件、不同的编程语言——我们怎么知道这一切能工作在一起？

是的，纯函数式编程会有所帮助。 是的，更好的测试、最新的花俏技术也许将有所帮助等等。

但是，现在它是一个烂摊子，并在10年的时间，将是一个更大的烂摊子。 Java允许我们在一个应用程序的规模组织起来。但是，我们需要工具来帮助我们在许多应用的规模上，组织好我们的软件，因为软件在吃掉整个世界，对不对？

## 3.聚焦性VS覆盖面

Lotus Notes是当互联网还在它的成长期时发展过来的。所以，当你开始作为一个Notes开发人员，你有一本或两本印刷手册。这很伟大：你需要知道的一切都在手册里，你通过建立的C ++应用程序与RDBMS后端反复交互，就可以很有效率。

最终什么地方出了错（我认为）是，当网页起飞，人们希望在网页上访问Notes数据库。Lotus / IBM拼命加功能，使Notes数据库可以通过网页浏览的。 但是，它是很难使用和繁琐，以及需要学习HTML。最后Lotus Notes模型的整个概念完整性丢失（再次参见第1条）。

现在的问题是：一个方案不适合每一个人。此外，你不能希望跟上一切。软件系统最多可以服务于某一个利基人群。

这是同样的原因，我们不只是在SQL数据库中建立所有的应用程序：在某个时间点上，像甲骨文公司试图打造这样的产品，你可以在数据库内建立整个应用程序 ，而且它会有表单、网页和所有东西。 但是，这没有成功：即使不考虑供应商锁定，最好是能够混合和匹配各种技术选择，以适合你的问题：试图做万能的东西给所有的人，仅仅是一个美好愿望。

这就是为什么Lotus Notes会跟不上：它太忙着做一切，而不是做好一件事。

## 不公平

当然，也许这是不公平的。 克里斯和EVE的团队所做的看上去是惊人的。 我不认为克里斯真的意味着，EVE将会成为“10年后的编程样子”。 真的，他说的话是：“我们需要开始做关于编程的更多实验，它应该成为什么样，就像我们在做的EVE探索”。

EVE努力去解决上述三个权衡，这几乎是当年的Notes相同的立场：我喜欢Notes，我想看到​Notes的一个现代版。 最好是解决了版本管理等等之类的问题。

但是，“10年编程规划”的设计，需要承认存在这些权衡，然后设计超越他们：真正的创新设计应重构这些权衡的折衷，来彻底改变景观。 仅仅是一些惊人的设计，不能让我们超越目前的现状，更多的实验、更多的想法和扔掉那些行不通，才能产生改变。

# 答复篇

https://gist.github.com/ibdknox/2b185fcb8e5d1de68796

克里斯的回答：感谢您的真正深思熟虑的回应！

对于它的价值，我也并不认为，我已经证明10年后编程将看起来什么样子，但我认为EVE能让我们避免了很多目前编程中的问题。 虽然这可能是一个不同的讨论。

## 问题：关于Lotus Notes

如果Lotus Notes真是那么好，为什么我们今天不使用它了呢？ 另外，如果Excel编程如此棒，我开发银行软件为什么不使用它？

回答：历史的意外、失败去适应、和底层基础弱，这些因素组合在一起。 这很难解释清楚Notes的“失败”（IBM的Notes仍然是一个10亿美金的业务..）的命运。虽然在许多情况下，Notes有了不起的和明显好的技术解决方案，但Lotus公司有一些失误。 Lotus Improv本可以轻易杀死Excel和整个电子表格市场，但由于差劲的定位工作，并没有做到（他们继续在同一时间出售1-2-3，从来没有充分解释为什么你要升级到Improv）。Notes继续发展，但从来没有完全找到进入下一个十年的道路。 它还受制于其自身过于庞大。

Excel中可以说是有史以来的软件中最成功的作品之一。 数以亿计的人每一天都在使用它的，人们用它做真正不可思议的事情。但它是一个非常特殊的工具 — 把你的思考限制到二维数字网格的工具。 所以，只要你能把你的问题表达到二维网格上，Excel将为你创造奇迹（可维护性的问题除外），但大多数的数据并不能用只是两个轴来表达。 银行软件肯定要去和具有无数维度的数据去互动。 此外，Excel由于缺乏关于改变的语义，和调试/错误报告工具，很难建立系统。 它真的只意味着是一个漂亮的台账，虽然人们有更有趣的方式使用它，它从来没有真正超越这一点。

## 问题：开放性和意外复杂性

回答：当你使用Java或C ++或任何通用的语言程序时，可以应对意外复杂性，因为这些语言是像胶水一样。这其实正是我们想让EVE去做的。EVE背后的语言/语义，来自于一个想法：编程就是转换一种格式的数据到另一个格式。 让无人飞机按照一个MP3跳舞，就是一个把MP3的波形转换为无人机的位置、并把那些位置转换到电机动作。银行软件是关于在非常严格的条件下，把一系列交易转换到总账中；把用户点击和表单提交等，转换到这些交易中，等等。 EVE最终希望是通用的，其主要区别只是，它具有较少的数据结构和由此带来的一组更小的固有操作。 我认为它是比任何Java或C++，是把随机来源的数据粘在一起的一个更自然的工具。

## 问题：“封闭”系统，在另一方面，迫使世界按自己的规则玩。

回答：所有的编程语言迫使你按照一套规则玩，所以我不知道这是否值得讨论下去。这里的基本讨论是表现能力将会如何 — 给定一些随机字符串，我能做些什么；给定一些规则，做起来有多难？ EVE绝对不会善于描述一个操作系统，或者关于计算机是如何工作，但在表达域级别的数据转换方面，我很难想象出更好的东西。 这是令人惊讶的表现能力，例如在视频中，我提到在不到一个星期的时间里，我写了600行代码的IDE（集成开发环境）。伯克利分校有人用规模极少的代码实现了Hadoop。EVE的规则是远没有C ++的或Java的规则那么严格，所以不会牺牲像你想象的那么多。

## 问题：我们是否可以建立开放式系统，而不用导入意外复杂性？

回答：这是一个有趣的问题。我们的回答是，我们可以比其它更好地管理复杂性，但我们不能去除存在于处理不同系统的固有的复杂性。相反，我们可以设计我们的语言和工具来帮助我们处理它。一个简单的例子是在系统中的任何值都有完整出处的信息。了解从所有这些不同的系统，什么信息馈入到某个值，是一个非常有价值的信息— 没有一个通用的语言能给你。随着精心降低某些“权力”（如不能指定值如何在内存布局），我们获得很大的收益，来聚焦我们最感兴趣的：使用计算机作为思维工具。更“强大”的语言，严格来说能力更强，但这些能力带来了复杂性的代价。它们不是真的在处理与外部系统的意外复杂性上更好。事实上，它们为这种处理能力，带来了自己的意外复杂性（引文：看任何的Java / C ++ PDF解析器的代码就理解了）。

## 问题：组织性VS可接近性。

全局状态常常是错误的来源，当你的软件规模扩大，你就在全局状态中冒局部内容混乱的风险

回答：几乎所有的系统，最终在底层都会注入到某种关系型数据库中。我们需要来源于全局的信息。全局状态的根本问题是无限制的全局突变。一个值可以被任何时间任何地点的任何值进行改变，这一点让我们苦不堪言。对于这一点，EVE到目前为止，还没有办法通过编程的方式来改变某个值。人类必须手工来更新一个值，或者必须由外部的东西来做（比如某个UI监视器，在按钮点击的时候来把新值放到系统中）。这种做法是来自于某些论文提到的『基本状态』的想法。对EVE最好的认识是：不可变日志的一组视图。

另一件要记住的事，当我说移除作用域的概念的时候，我说的是移除封装的作用域。我能看到的任何值，我能在任何地方使用。这不排除等级或所有权，例如克里斯的年龄，它只是意味着，如果我有机会获得克里斯的年龄，我可以任意地在计算中参考。按照上面的说法，这是安全的，因为你能做的只是读取一个值。

我认为我们有一个组织模型，比任何严格的分层（类）模型，要更强大。Eve完全是一个关系数据库，所以信息（包括“代码”等）可以在你想要的任何图形结构中，以任意维度组织。 您甚至可以对该信息构建任意视图，以创建全新的特定组织（例如“与克里斯的年龄相关的模板”）。 随意组织的结果是令人难以置信的强大。

## 问题：测试都是手动的。

修订控制（git）是不可能的。

回答：在EVE的工作机制中，因为软件没有内部机制对数据进行改变，所以一系列的错误都可以被避免。你直接使用真实的，或至少示例数据（可以自动生成）来工作，所以当事情发生错误时，它是很明显的。

我们打算让Eve拥有比git更灵活和直观的版本控制系统。 你可以阅读一些我们关于此的思考在这里： http://incidentalcomplexity.com/2015/04/22/version-control/

这些都是关于维护性的。我认为Eve对程序员最令人兴奋的事情之一是，它是一种基于可观察性而建立的语言。完整的数据源和一个透明的视图集，给了我们完整的信息，为什么一个值是现在这样。 这意味着调试不再是狩猎和啄食的行为。

你可以问“为什么是这10？“。Eve会告诉你，计算得到它的所有数据，它采取的完整路径...一切。 你甚至可以开始问问题，如在这条路径，它是否得到> 5。同时具备能够创建系统的任意视图（例如，“如果我修改了克里斯的薪水，什么模板会更新”）的能力，你最终得到了巨大能力，来理解和运行系统。

## 问题：焦点vs覆盖。

最好能够混合和匹配您的技术选择，以适应您的问题

回答：我完全同意，这就是为什么我喜欢EVE，作为所有这些选择之间的粘合。Eve提供的基本语言，是非常专门用于来回转换数据的基本语言。事实证明，很多编程真的只是这样。如果你把通信的概念添加到系统中（就像Notes那样），你可以实现相当不可思议的功能量。多年来，从程序员和非程序员那里收集的所有示例，都可以被描述为向自己、其他人或其他系统传递信息。因此，我们正在建立的正是这样一个平台 - 收集信息、转换它、并将其传达给任何人或任何想看到它的系统。

最终在哪里会找到一个家，是一个开放的问题，就像你说，我们需要找到焦点。但是无论哪里，我不认为我们会真正地把它作为编程谈论。当使用它时，它看起来或感觉起来不像编程。 这是别的东西，只是碰巧在完成相同的任务。以这种方式，它真的类似于Notes，它刚开始的时候与原来存在的相比只是“别的东西”。

我在天空漂浮的梦想，是将Notes超越电子邮件工作流程工具，转化为我们可以用来思考和沟通的工具。科学家可以用来做他们的工作，以应对气候变化和治疗癌症。我们的老师朋友可以自动跟踪他们的学生，我们的律师朋友可以管理不同轮次的融资。 我相信像大多数语言一样，我们会找到一个利基，但没有理由，EVE不能仍然广泛地有用。

没有理由，我们不能实现“思考的自行车”的目标。

翻译：殷建松